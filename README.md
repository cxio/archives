# 开放存档服务

这是一个通用的文档存储和分享的P2P应用。它运行于数据驿站之内，作为驿站节点的内部微服务。

存档应用与数据驿站之间采用Websocket连接。应用主动连接驿站服务器，但自身作为一个从动服务端，听从驿站的调配指挥。这有点像存档应用在驿站上注册自身。逻辑上，一个驿站可以注册多个存档应用。

详细设计参见：[design](docs/design.md)。


## 安装

作为一个命令行App，下载即可使用。


### 命令行

-h, --help      显示帮助信息
-v, --version   显示版本信息
--config 文件   指定配置文件路径（默认：`./config.hjson`），可选

执行启动：

```bash
# 下面的配置文件参数可选
localhost@user > ./archived --config "yourconf.json" &
```

程序并不主动连出寻求P2P组网，只是听从上级服务的数据要求行事。上级会提供准确的数据源节点信息。

但程序还是需要主动连接Findings公共服务节点，以在必要的情况下寻求打洞协助。如果有隐私需求，也需要主动连接*中转网*。


### 配置

用户可通过配置文件（`config.hjson`）指定自己的服务端口和数据日志的存储位置等信息。

如果同一主机上需要启动多个实例，可使用不同的配置文件启动。


## 指令接口

通过 Websocket 连接交互，发送目标指令完成相应的功能。

- 接受询问：目标文档是否存在。
- 接受分派：下载目标ID的文档、存储。
- 接受指令：分享目标ID的文档（如果数据存在）。
-